# Модуль оплаты Mulen для Joomla

Это модуль для интеграции платежной системы Mulen Pay с Joomla.

## Установка

1.  Скачайте последнюю версию модуля в виде zip-архива.
2.  Войдите в панель администратора Joomla.
3.  Перейдите в `Расширения` -> `Менеджер расширений` -> `Установить`.
4.  Перетащите zip-архив в область загрузки или нажмите кнопку "Or browse for file" и выберите архив.
5.  Модуль будет установлен автоматически.

## Настройка

1.  Перейдите в `Расширения` -> `Менеджер модулей`.
2.  Найдите модуль `Mulen Payment` и откройте его для редактирования.
3.  На вкладке `Модуль` вы найдете следующие поля:
    *   `Shop ID`: Ваш ID магазина из личного кабинета Mulen Pay.
    *   `Secret Key`: Ваш секретный ключ из личного кабинета Mulen Pay.
    *   `API Key`: Ваш API ключ из личного кабинета Mulen Pay.
4.  Заполните эти поля и сохраните настройки.

## Использование

Этот модуль предоставляет функцию `ModMulenPaymentHelper::getPaymentLink($params, $order_details)` для создания ссылки на оплату. Вы можете использовать эту функцию в своем компоненте электронной коммерции для создания кнопки оплаты.

`$params` - это объект параметров модуля.
`$order_details` - это массив с деталями заказа:

```php
$order_details = [
    'amount' => 100.50, // Сумма заказа
    'uuid' => 'ORDER-123', // Уникальный идентификатор заказа
    'description' => 'Оплата заказа #123', // Описание заказа
    'items' => [ // Массив товаров
        [
            'description' => 'Товар 1',
            'price' => 50.25,
            'quantity' => 1,
            'vat_code' => 0,
            'payment_subject' => 1,
            'payment_mode' => 4,
        ],
        [
            'description' => 'Товар 2',
            'price' => 50.25,
            'quantity' => 1,
            'vat_code' => 0,
            'payment_subject' => 1,
            'payment_mode' => 4,
        ],
    ],
];
```

## Вебхуки

Для обработки уведомлений о статусе платежа от Mulen Pay, вам необходимо настроить вебхук.

URL для вебхука: `https://ваш-сайт.ru/modules/mod_payment/webhook.php`

Вам нужно заменить `https://ваш-сайт.ru` на реальный адрес вашего сайта.

Файл `webhook.php` получает уведомления и может быть использован для обновления статуса заказа в вашей системе. Вам потребуется доработать этот файл для интеграции с вашим компонентом электронной коммерции.
